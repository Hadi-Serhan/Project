<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mage Core</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div id="wrap">
  <canvas id="game"></canvas>

  <!-- Vue UI -->
  <div id="app" style="margin-top:8px;">
    <div class="row">
      <button @click="startWave" :disabled="waveRunning || defeated">Start Wave</button>
      <span class="pill">Wave: {{ wave }}</span>
      <span class="pill">Core HP: {{ coreHP }}</span>
      <span class="pill">Gold: {{ gold }}</span>
      <span class="pill">{{ waveStatus }}</span>
    </div>

    <div class="row">
      <button @click="reset">Reset</button>
    </div>

    <div class="row" style="margin-top:6px;"><strong>Upgrades</strong></div>
    <div class="row">
      <button @click="buy('dmg')" :disabled="gold < costs.dmg">+ Damage</button>
      <span>Cost: {{ costs.dmg }}</span>
    </div>
    <div class="row">
      <button @click="buy('rof')" :disabled="gold < costs.rof">+ Fire Rate</button>
      <span>Cost: {{ costs.rof }}</span>
    </div>
    <div class="row">
      <button @click="buy('range')" :disabled="gold < costs.range">+ Range</button>
      <span>Cost: {{ costs.range }}</span>
    </div>

    <div class="row" style="margin-top:10px;"><strong>Abilities</strong></div>
    <div class="row">
      <button @click="cast('nova')" :disabled="cd.nova > 0">Fire Nova (Q)</button>
      <span>CD: {{ cd.nova > 0 ? cd.nova.toFixed(1)+'s' : 'ready' }}</span>
    </div>
    <div class="row">
      <button @click="cast('frost')" :disabled="cd.frost > 0">Frost Dome (W)</button>
      <span>CD: {{ cd.frost > 0 ? cd.frost.toFixed(1)+'s' : 'ready' }}</span>
    </div>
  </div>

  <!-- Keep old panel in DOM (hidden) so main.js can still reference its IDs -->
  <div id="panel" style="display:none">
    <!-- your old buttons/labels live here unchanged -->
  </div>
</div>

<!-- Vue -->
<script src="https://unpkg.com/vue@3/dist/vue.global.prod.js"></script>

<!-- Engine state -->
<script>
window.engine = {
  getSnapshot: () => ({}),  // Will be replaced by main.js
  subscribe: () => () => {},  // Will be replaced by main.js
  actions: {
    startWave: () => {},
    reset: () => {},
    buy: () => {},
    cast: () => {}
  }
};
</script>

<!-- Engine / modules (note the ../ since index.html is in mage-core/) -->
<script type="module" src="../src/main.js"></script>
<script type="module" src="../src/ui/vue-app.js"></script>
</body>
</html>
